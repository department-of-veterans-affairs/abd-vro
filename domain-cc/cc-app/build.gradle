import ru.vyarus.gradle.plugin.python.task.PythonTask

plugins {
  id 'local.python.container-service-conventions'
  id('ru.vyarus.use-python') version "3.0.0"
}

python {
  installVirtualenv = true
}

def requirements = tasks.register("requirements", PythonTask) {
  module = 'pip'
  command = "install -r requirements.txt"
}

// Runs pytest when `./gradlew test` is run
// Also skips pytest when `./gradlew build -x test` is run
//tasks.register("test", PythonTask) {
//  module = 'pytest'
//  //  command = "--ignore=pdfgenerator/src/local_pdf_test.py --cov-report term-missing --cov=. --cov-fail-under=80 --cov-config=../../.coveragerc"
//  dependsOn pyflake8
//}
//
