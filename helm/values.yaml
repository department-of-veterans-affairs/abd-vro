# Best practices: https://helm.sh/docs/chart_best_practices/values/

# Normal state:
rabbitmq:
  enabled: true
postgres:
  enabled: true
redis:
  enabled: true
vro-app:
  enabled: true
vro-svcs.enabled: true
domain-rrd:
  enabled: true
# Enable as needed:
console:
  enabled: false

rabbitmq-chart:
  imageTag: "3"

redis-chart:
  imageTag: "7"

# To override a setting on commandline: helm --set-string "global.someKey=someValue" ...
global:

  serviceUriPrefix: abd-vro

  hostnamePrefix: vro

  images:
    # Configurable b/c VRO has 2 repos
    repo: abd-vro-internal

  imagePrefix: dev_
  # tag is used to set the default image tag for all VRO images
  imageTag: "latest"

  commitSha: placeholder

  # Persistent Volumes
  pgdata:
    pvcName: vro-pgdata-pvc
    mountPath: /persist/postgres
    storageSize: 2Gi
  tracking:
    pvcName: vro-tracking-pvc
    mountPath: /persist/tracking
    storageSize: 1Gi

  # environment is overridden by deploy scripts with $ENV values like dev, qa, prod
  environment: dev
  # Used by virtual-service's hosts
  # Refer to https://animated-carnival-57b3e7f5.pages.github.io/container-platform/routing-traffic/
  endpoint: dev.lighthouse.va.gov
  lhdiCluster: nonprod

  # TODO: Replace with images.tag or subchart's imageTag?
  # version is used in annotations for APP
  version: 0.1

  service:
    app:
      sourcePort: 8080
      targetPort: 8080
    db:
      sourcePort: 5432
      targetPort: 5432
      databaseName: vro
      schemaName: claims
    mq:
      sourcePort: 5672
      targetPort: 5672
    redis:
      sourcePort: 6379
      targetPort: 6379

  bip:
    bipClaimUrl: claims-uat.stage8.bip.va.gov/api/v1
    bipEvidenceUrl: vefs-claimevidence-uat.stage8.bip.va.gov/api/v1/rest

  mas:
    masApiAuthTokenUri: https://viccs-api-dev.ibm-intelligent-automation.com/pca/api/dev/token
    masApiBaseUrl: https://viccs-api-dev.ibm-intelligent-automation.com/pca/api/dev

vro-app-chart:
  # Must quote, otherwise YAML interprets 'NO' as a boolean false
  validateToken: "NO"
  vroAudUrl: https://sandbox-api.va.gov/services/abd-vro
  lhApiAuthUrl: https://sandbox-api.va.gov/internal/auth/v2/validation

#  dbinit:
#    secretKeyRef:
#      name: dbinit
#      # DB super user
#      superUsernameKey: superUsername
#      superPasswordKey: superPassword
#      # DB admin user; for Flyway to do DB migrations
#      # used as POSTGRES_FLYWAY_USER (in pg-isready container) and FLYWAY_USER (in the postgres and dbinit containers)
#      usernameKey: username
#      passwordKey: password
