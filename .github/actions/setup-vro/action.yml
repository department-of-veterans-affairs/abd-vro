name: "Set up VRO build env"

description: "Installs Java and Python, along with dependencies to build VRO"

runs:
  using: composite
  steps:
    - name: "Install Java"
      uses: actions/setup-java@v3
      with:
        distribution: temurin
        java-version: '17'
        # "When using gradle-build-action we recommend that you
        # not use actions/cache or actions/setup-java@v3 to explicitly
        # cache the Gradle User Home"
        # cache: 'gradle'

    - name: "Setup Gradle"
      uses: gradle/gradle-build-action@v2
      with:
        gradle-home-cache-cleanup: true

    - uses: ./.github/actions/install-java-tools

    - name: "Install Python"
      uses: actions/setup-python@v4
      with:
        python-version: "3.9"
        cache: "pip"

    - name: "Install Python dependencies"
      shell: bash
      run: |
        pip install -r service-python/requirements.txt
