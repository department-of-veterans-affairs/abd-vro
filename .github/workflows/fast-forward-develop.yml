name: "7. Fast-forward merge the develop branch"

on:
  workflow_dispatch:
    inputs:
      domain_branch:
        description: 'Target domain branch'
        required: true
        type: choice
        options:
        - domain-cc

jobs:
  fast-forward-develop:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.ACCESS_TOKEN_PUSH_TO_DEVELOP }}

      - name: Fast-forward merge ${{ inputs.domain_branch }}
        run: |
          git fetch origin ${{ inputs.domain_branch }}
          git checkout --track origin/${{ inputs.domain_branch }}
          git checkout develop
          git merge --ff-only ${{ inputs.domain_branch }}
          git push origin
