name: "1. (Internal) Continuous Delivery (to DEV daily)"

on:
  schedule:
    # Run every day at 19:00 UTC
    # https://pubs.opengroup.org/onlinepubs/9699919799/utilities/crontab.html#tag_20_25_07
    - cron: '0 19 * * *'

  # Allow manual triggering
  workflow_dispatch:

jobs:
  deploy-vro-app:
    uses: ./.github/workflows/update-deployment-app.yml
    secrets: inherit
    with:
      target_env: dev
      image_tag: latest
      app: latest
      db_init: latest
  deploy-vro-svc-bgs-api:
    uses: ./.github/workflows/update-deployment.yml
    secrets: inherit
    with:
      target_env: dev
      helm_chart: svc-bgs-api
      image_tag: latest
  deploy-vro-svc-lighthouse-api:
    uses: ./.github/workflows/update-deployment.yml
    secrets: inherit
    with:
      target_env: dev
      helm_chart: svc-lighthouse-api
      image_tag: latest
  deploy-domain-cc:
    uses: ./.github/workflows/update-deployment.yml
    secrets: inherit
    with:
      target_env: dev
      helm_chart: domain-cc
      image_tag: latest
