name: Snyk code scan

on:
  pull_request:
    branches: [main, develop]
    # Limit to certain PR event types since this action doesn't need to run for every commit
    types: [ready_for_review, review_requested]

  # Allow manual triggering
  workflow_dispatch:

jobs:
  snyk:
    name: Run Snyk Code
    uses: department-of-veterans-affairs/lighthouse-tornado-secrel-pipeline/.github/workflows/snyk.yml@v4.0.0
    with:
      config-file: .github/secrel/config4.yml # Should be same config used by SecRel
      type: code
    secrets: inherit
