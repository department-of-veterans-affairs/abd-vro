# NOTE: the name cannot have underscore
name: abd-vro
owner: VA-OCTO
environment: dev # The .Values.environment is computed by the deploy plugin - it returns//uses values like dev, qa, pre, prod etc
cluster: nonprod
# TODO: How is version used? What should this be set to?
version: 0.1
# replicaCount: 1

labels:
  db:
    global: &labels-db-global
      app: postgres-db
    pod:
      <<: *labels-db-global
      sidecar.istio.io/inject: "false"
      # volume label is to ensure the db pod runs in the same node as the PVC for db data storage
      volume: database

images:
  registry: ghcr.io
  org: department-of-veterans-affairs
  # Note the repo name uses a hypen, not underscore
  repo: abd-vro
  db:
    imageName: dev_vro-postgres
    tag: tagPlaceholder
  console:
    imageName: dev_vro-console
    tag: tagPlaceholder

resources:
  db:
    requests:
      cpu: 150m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1024Mi

service:
  db:
    type: ClusterIP
    sourcePort: 5432
    targetPort: 5432

volumes:
  tracking:
    name: tracking-persistent-storage
    claimName: tracking-efs-claim
    mountPath: /persist/tracking

postgres:
  dbName: vro
  secretName: postgres
  usernameKey: username
  passwordKey: password
  dbnameKey: dbName
  initDbName: vro
  initUsernameKey: initUsername
  initPasswordKey: initPassword
  urlKey: url
  schemaKey: schema

dbinit:
  secretName: dbinit
  superUsernameKey: superUsername
  superPasswordKey: superPassword
  superDbnameKey: superDbname
  urlKey: url
  usernameKey: username
  passwordKey: password

rabbitmq:
  secretName: rabbitmq
  usernameKey: User
  passwordKey: Pass

# Needed to connect to Redis
redis:
  secretName: redis
  passwordKey: redisPassword
