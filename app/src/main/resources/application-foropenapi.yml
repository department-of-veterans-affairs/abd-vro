info:
  app:
    name: abd_vro
    description: Virtual Regional Office API

# API Auth
apiauth:
  hdr-key-name: X-API-Key
  url-context: /v1/**

management:
  # TODO: Figure out the proper security for these, and perhaps don't expose everything
  endpoints.web:
    exposure.include: "*"
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
      group:
        liveness.include: livenessState
        readiness.include: readinessState, db
  metrics:
    enabled: true
    distribution:
      percentiles.http.server.requests: 0.5, 0.90, 0.95, 0.99, 0.999
      percentiles-histogram.http.server.requests: true
      sla.http.server.requests: 10ms, 50ms
      slo.http.server.requests: 10ms, 50ms
    tags:
      group: starter
      service: example
      region: "${POD_REGION:local}"
      stack: "${CLUSTER:dev}"
      ns: "${NAMESPACE:example}"
      pod: "${POD_ID:docker}"
    web.server.request.autotime.enabled: true
  server.port: 8081

server:
  tomcat:
    basedir: build/tomcat
    max-threads: 100
  ssl:
    enabled: false
  port: 8080

log4j2:
  formatMsgNoLookups: true

spring:
  application:
    name: "starter-api"

  datasource:
    driverClassName: org.h2.Driver
    url: jdbc:h2:mem:example;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;
    username: skuser
    password: localT3st!
    hikari:
      driverClassName: org.h2.Driver
      username: skuser
      password: localT3st!
  jpa:
    generate-ddl: false
    hibernate:
      ddl-auto: none
  kafka:
    bootstrap-servers: "kafka:9092"

  resources:
    add-mappings: false
  mvc:
    throw-exception-if-no-handler-found: true
  http:
    encoding:
      force: true

opentracing:
  zipkin:
    enabled: false
    http-sender.baseUrl: http://zipkin.istio-system.svc.cluster.local:9411

springdoc:
  writer-with-default-pretty-printer: true
  show-actuator: true
  packages-to-exclude: gov.va.starter,gov.va.vro.controller.demo

  swagger-ui:
    operations-sorter: method
    tagsSorter: alpha
    path: swagger

starter:
  openapi:
    authUrl: https://iam.va.gov/whoami
    default-oauth-security-scheme: true
    default-jwt-bearer-security-scheme: true
    license: CCO 1.0
    title: Virtual Regional Office (VRO) Automated Benefits Delivery (ABD) API
    description: APIs to improve benefit delivery services
    version: v1
    licenseUrl: https://github.com/department-of-veterans-affairs/abd-vro/blob/master/LICENSE.md
    contactEmail: dung.lam1@va.gov
    contactName: D (Yoom) Lam
    serverUrl: ${STARTER_OPENAPI_SERVERURL:/}
  boot:
    kafka-lifecycle-notifier:
      enabled: false
      producer:
        topic.name: example-entity-lifecycle
        replication.factor: 1
        partition.number: 1
      consumer:
        topic.name: example-entity-lifecycle
        level.concurrency: 1

# opa:
#   filter:
#     enabled: true
#     document-path: authz
#     instance: http://opa:8181
#     endpoints-whitelist: /swagger*/**,/v3/api-docs/**,/liveness,/readiness,/health/**

spring.config.import: >
  conf-camel.yml,
  conf-camel-rabbitmq.yml
