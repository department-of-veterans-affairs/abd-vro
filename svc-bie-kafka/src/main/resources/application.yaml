spring:
  profiles:
    # See https://github.com/department-of-veterans-affairs/abd-vro/wiki/Configuration-settings#vros-use-of-spring-profiles
    active: ${ENV:default}

  # Specify where Spring connects to RabbitMQ
  rabbitmq:
    host: "${RABBITMQ_PLACEHOLDERS_HOST:localhost}"
    port: 5672
    username: "${RABBITMQ_USERNAME:guest}"
    password: "${RABBITMQ_PASSWORD:guest}"

  # Specify how Spring connects to Kafka
  kafka:
    bootstrap-servers: "${BIE_KAFKA_PLACEHOLDERS_BROKERS:localhost:9092}"
    properties:
      basic.auth.credentials.source: USER_INFO
      basic.auth.user.info: "${BIE_KAFKA_RBAC_USERNAME}:${BIE_KAFKA_RBAC_PASSWORD}"
      schema.registry:
        basic.auth.credentials.source: USER_INFO
        basic.auth.user.info: "${BIE_KAFKA_RBAC_USERNAME}:${BIE_KAFKA_RBAC_PASSWORD}"
        url: "${BIE_KAFKA_PLACEHOLDERS_BROKERS:https://bip-kafka.tst.bip.va.gov}"
        ssl:
          truststore.location: "${TRUSTSTORE_FILE}"
          truststore.password: "${BIE_KAFKA_TRUSTSTORE_PASSWORD}"
          truststore.type: "PKCS12"
      specific.avro.reader: false
      security.protocol: SASL_SSL
      security.inter.broker.protocol: SASL_SSL
      sasl:
        mechanism: PLAIN
        jaas:
          config: "org.apache.kafka.common.security.plain.PlainLoginModule required username=${BIE_KAFKA_RBAC_USERNAME} password=${BIE_KAFKA_RBAC_PASSWORD};"
    consumer:
      group-id: "${BIE_KAFKA_PLACEHOLDERS_GROUP_ID:vro-bie-tst-vro}"
      key-deserializer: "org.apache.kafka.common.serialization.StringDeserializer"
      value-deserializer: "org.apache.kafka.common.serialization.StringDeserializer"
      auto-offset-reset: earliest
      security:
        protocol: SASL_SSL
      ssl:
        trust-store-location: "file:${TRUSTSTORE_FILE}"
        trust-store-password: "${BIE_KAFKA_TRUSTSTORE_PASSWORD}"
        trust-store-type: "PKCS12"

## Specify bie properties
bie:
  kafka-topic-env: "TST"

## Actuator for health check, liveness, and readiness
management:
  server:
    port: 10301
  endpoint:
    health:
      show-details: always
      enabled: true
      probes:
        enabled: true
      group:
        liveness.include: livenessState
        readiness.include: readinessState