
spring:
  kafka:
    # To prevent java.net.UnknownHostException mock-bie-kafka, use mock Kafka's 'EXTERNAL' port 9094
    # since the integration test runs outside the docker-compose network
    # See https://github.com/bitnami/containers/blob/main/bitnami/kafka/README.md#accessing-apache-kafka-with-internal-and-external-clients
    bootstrap-servers: "localhost:9094"
    properties:
      security.protocol: SASL_SSL
      security.inter.broker.protocol: SASL_SSL
      sasl:
        mechanism: PLAIN
        jaas:
          config: "org.apache.kafka.common.security.plain.PlainLoginModule required username=${BIE_SASL_USERNAME:USERNAME} password=${BIE_SASL_PASSWORD:PASSWORD};"
      ssl:
        # Disable hostname verification to avoid error for 'localhost' by setting to empty string
        endpoint.identification.algorithm:
        key-store-location: "file:${KEYSTORE_FILE}"
        key-store-password: "${BIE_KAFKA_KEYSTORE_PASSWORD}"
        key-store-type: "PKCS12"
        trust-store-location: "file:${TRUSTSTORE_FILE}"
        trust-store-password: "${BIE_KAFKA_TRUSTSTORE_PASSWORD}"
        trust-store-type: "PKCS12"
    producer:
      key-serializer: "org.apache.kafka.common.serialization.StringSerializer"
      value-serializer: "org.apache.kafka.common.serialization.StringSerializer"
