/**
 * Provides docker container settings
 * Mimics local.java.container-conventions.gradle except for Ruby projects
 */

plugins {
    id 'shared.docker.container-conventions'
}

docker {
    dockerfile findDockerfile(['src/docker/Dockerfile', '/docker/Dockerfile-ruby'])

    copyFromResources(copySpec, [
        '/docker/set-env-secrets.src',
        '/docker/entrypoint-wrapper.sh'
    ])
    files "src/docker/entrypoint.sh"

    // Copy files into build/docker/ folder, where the container image will be built
    copySpec.into(".").from("src"){
        exclude('docker')
    }
}
