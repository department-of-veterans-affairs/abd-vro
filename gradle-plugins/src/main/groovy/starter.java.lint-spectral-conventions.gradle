/**
 * Configuration for spotless code formatting
 */

plugins {
}

def spectralLint = tasks.register("spectralLint", Exec) {
    group = JavaBasePlugin.VERIFICATION_GROUP
    description = "use Spectral linting to check OpenAPI spec"
    ext.oasPath = "build/springdoc/openapi.json"
    ext.spectralLintCommand = "lint"
    executable('spectral')
    args(ext.spectralLintCommand, ext.oasPath)
    dependsOn 'generateOpenApiDocs'
}

tasks.named("check").configure {
    dependsOn spectralLint
}
